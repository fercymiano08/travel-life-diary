<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Gallery - Travel Life Diary</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,100..1000;1,100..1000&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #ff3b2f 0%, #ff954d 100%);
            --text-orange: #ff6b3d;
            --light-orange: #ffe8e0;
            --dark-orange: #e55a35;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'DM Sans', sans-serif;
        }

        body {
            background: var(--primary-gradient);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .gallery-container {
            background-color: white;
            width: 100%;
            max-width: 800px;
            border-radius: 40px;
            padding: 35px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            max-height: 95vh;
            overflow-y: auto;
        }

        /* Header */
        .gallery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--light-orange);
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 59, 47, 0.3);
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 59, 47, 0.4);
        }

        .trip-info {
            text-align: center;
            flex-grow: 1;
        }

        .trip-info h1 {
            color: var(--text-orange);
            font-size: 24px;
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .trip-info p {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }

        .action-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 59, 47, 0.3);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 59, 47, 0.4);
        }

        /* Gallery Stats */
        .gallery-stats {
            background: var(--light-orange);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-item .value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-orange);
            margin-bottom: 5px;
        }

        .stat-item .label {
            font-size: 12px;
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Filter Bar */
        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #f5f5f5;
            color: #666;
            border: 2px solid #eee;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn:hover {
            background: #eee;
        }

        .filter-btn.active {
            background: var(--primary-gradient);
            color: white;
            border-color: var(--text-orange);
        }

        /* Gallery Grid */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .photo-item {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            aspect-ratio: 1;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .photo-item:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--text-orange);
            box-shadow: 0 10px 25px rgba(255, 107, 61, 0.3);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .photo-item:hover img {
            transform: scale(1.1);
        }

        .photo-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
            padding: 15px 10px 10px;
            transform: translateY(100%);
            transition: transform 0.3s;
            font-size: 12px;
        }

        .photo-item:hover .photo-info {
            transform: translateY(0);
        }

        .photo-date {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .photo-location {
            opacity: 0.9;
            font-size: 10px;
        }

        .photo-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .photo-item:hover .photo-actions {
            opacity: 1;
        }

        .photo-action-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-orange);
            transition: all 0.3s;
        }

        .photo-action-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        /* Empty State */
        .empty-gallery {
            text-align: center;
            padding: 50px 20px;
            color: #999;
        }

        .empty-gallery i {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-gallery h3 {
            color: var(--text-orange);
            margin-bottom: 10px;
        }

        /* Upload Area */
        .upload-area {
            border: 3px dashed var(--text-orange);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-top: 30px;
            background: var(--light-orange);
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area:hover {
            background: #ffd1c1;
            transform: translateY(-2px);
        }

        .upload-area i {
            width: 60px;
            height: 60px;
            color: var(--text-orange);
            margin-bottom: 15px;
        }

        /* Lightbox Modal */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .lightbox-container {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            background: black;
            border-radius: 10px;
            overflow: hidden;
        }

        .lightbox-img {
            max-width: 100%;
            max-height: 80vh;
            display: block;
            margin: 0 auto;
        }

        .lightbox-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s;
        }

        .lightbox-container:hover .lightbox-info {
            transform: translateY(0);
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            transform: translateY(-50%);
        }

        .lightbox-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .lightbox-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .lightbox-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .gallery-container {
                padding: 20px;
                border-radius: 30px;
            }
            
            .gallery-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .gallery-stats {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>

<!-- Lightbox Modal -->
<div class="lightbox-overlay" id="lightbox">
    <div class="lightbox-container">
        <button class="lightbox-close" onclick="closeLightbox()">
            <i data-lucide="x"></i>
        </button>
        
        <div class="lightbox-nav">
            <button class="lightbox-btn" onclick="prevPhoto()">
                <i data-lucide="chevron-left"></i>
            </button>
            <button class="lightbox-btn" onclick="nextPhoto()">
                <i data-lucide="chevron-right"></i>
            </button>
        </div>
        
        <img class="lightbox-img" id="lightboxImage" src="" alt="Photo">
        
        <div class="lightbox-info">
            <h3 id="lightboxTitle">Photo Title</h3>
            <p id="lightboxDate">Date: Loading...</p>
            <p id="lightboxDescription">Description: Loading...</p>
            <div style="margin-top: 10px; display: flex; gap: 10px;">
                <button class="filter-btn" onclick="downloadPhoto()" style="background: #333; color: white;">
                    <i data-lucide="download"></i> Download
                </button>
                <button class="filter-btn" onclick="sharePhoto()" style="background: #333; color: white;">
                    <i data-lucide="share-2"></i> Share
                </button>
                <button class="filter-btn" onclick="deleteCurrentPhoto()" style="background: #ff3b2f; color: white;">
                    <i data-lucide="trash-2"></i> Delete
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Main Gallery -->
<div class="gallery-container">
    <!-- Header -->
    <div class="gallery-header">
        <button class="back-btn" onclick="goBack()">
            <i data-lucide="arrow-left"></i>
            Back to Trip
        </button>
        
        <div class="trip-info">
            <h1 id="tripTitle">Boracay Vacation</h1>
            <p id="photoCount">Loading photos...</p>
        </div>
        
        <button class="action-btn" onclick="uploadPhotos()">
            <i data-lucide="plus"></i>
            Add Photos
        </button>
    </div>

    <!-- Gallery Stats -->
    <div class="gallery-stats">
        <div class="stat-item">
            <div class="value" id="totalPhotos">0</div>
            <div class="label">Total Photos</div>
        </div>
        <div class="stat-item">
            <div class="value" id="daysCovered">0</div>
            <div class="label">Days Covered</div>
        </div>
        <div class="stat-item">
            <div class="value" id="totalLikes">0</div>
            <div class="label">Total Likes</div>
        </div>
        <div class="stat-item">
            <div class="value" id="storageUsed">0MB</div>
            <div class="label">Storage Used</div>
        </div>
    </div>

    <!-- Filter Bar -->
    <div class="filter-bar">
        <button class="filter-btn active" onclick="filterPhotos('all')">
            <i data-lucide="grid"></i>
            All Photos
        </button>
        <button class="filter-btn" onclick="filterPhotos('favorites')">
            <i data-lucide="heart"></i>
            Favorites
        </button>
        <button class="filter-btn" onclick="filterPhotos('recent')">
            <i data-lucide="clock"></i>
            Recent
        </button>
        <button class="filter-btn" onclick="filterPhotos('byDate')">
            <i data-lucide="calendar"></i>
            By Date
        </button>
        <button class="filter-btn" onclick="filterPhotos('location')">
            <i data-lucide="map-pin"></i>
            By Location
        </button>
    </div>

    <!-- Gallery Grid -->
    <div id="galleryGrid" class="gallery-grid">
        <!-- Photos will be loaded here -->
    </div>

    <!-- Empty State (shown when no photos) -->
    <div id="emptyState" class="empty-gallery" style="display: none;">
        <i data-lucide="camera-off"></i>
        <h3>No Photos Yet</h3>
        <p>Start capturing your travel memories!</p>
        <p style="font-size: 14px; margin-top: 15px; color: #666;">
            Photos you add will appear here organized by date and location.
        </p>
        <button class="action-btn" style="margin-top: 20px;" onclick="uploadPhotos()">
            <i data-lucide="upload"></i>
            Upload Your First Photo
        </button>
    </div>

    <!-- Upload Area -->
    <div class="upload-area" onclick="uploadPhotos()" id="uploadArea">
        <i data-lucide="upload-cloud"></i>
        <h3 style="color: var(--text-orange); margin-bottom: 10px;">Add More Photos</h3>
        <p style="color: #666; margin-bottom: 10px;">
            Drag and drop photos here or click to browse
        </p>
        <p style="font-size: 12px; color: #999;">
            Supports JPG, PNG, HEIC up to 10MB each
        </p>
        <input type="file" id="fileUpload" accept="image/*" multiple style="display: none;">
    </div>
</div>

<script>
    // Initialize icons
    lucide.createIcons();
    
    // State management
    let currentTripId = null;
    let allPhotos = [];
    let filteredPhotos = [];
    let currentFilter = 'all';
    let currentLightboxIndex = 0;
    
    // Get trip ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    currentTripId = urlParams.get('id') || 1;
    
    // Load on page load
    window.onload = function() {
        loadTripInfo();
        loadPhotos();
        setupUpload();
    };
    
    // Load trip information
    function loadTripInfo() {
        // Load from localStorage
        const trips = JSON.parse(localStorage.getItem('travelTrips') || '[]');
        const trip = trips.find(t => t.id == currentTripId) || getSampleTrip();
        
        document.getElementById('tripTitle').textContent = trip.name;
        document.getElementById('photoCount').textContent = `${trip.photosCount || 0} photos`;
    }
    
    // Load photos from storage
    function loadPhotos() {
        // Load from localStorage
        const tripPhotos = JSON.parse(localStorage.getItem('tripPhotos') || '{}');
        const tripKey = `trip_${currentTripId}`;
        
        if (tripPhotos[tripKey]) {
            allPhotos = tripPhotos[tripKey];
        } else {
            // Load sample photos if none exist
            allPhotos = getSamplePhotos();
            savePhotos();
        }
        
        updateGallery();
        updateStats();
    }
    
    // Update gallery display
    function updateGallery() {
        const gallery = document.getElementById('galleryGrid');
        const emptyState = document.getElementById('emptyState');
        
        // Filter photos based on current filter
        filteredPhotos = filterPhotosByType(allPhotos, currentFilter);
        
        if (filteredPhotos.length === 0) {
            gallery.style.display = 'none';
            emptyState.style.display = 'block';
            return;
        }
        
        gallery.style.display = 'grid';
        emptyState.style.display = 'none';
        
        // Sort by date (newest first)
        filteredPhotos.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        // Create gallery items
        gallery.innerHTML = filteredPhotos.map((photo, index) => `
            <div class="photo-item" onclick="openLightbox(${index})">
                <img src="${photo.url}" alt="${photo.caption || 'Travel photo'}" 
                     onerror="this.src='https://via.placeholder.com/300/ff6b3d/ffffff?text=Photo+Not+Found'">
                
                <div class="photo-info">
                    <div class="photo-date">
                        ${formatDate(photo.date)}
                    </div>
                    <div class="photo-location">
                        ${photo.location || 'Unknown location'}
                    </div>
                </div>
                
                <div class="photo-actions">
                    <button class="photo-action-btn" onclick="event.stopPropagation(); toggleFavorite(${index})">
                        <i data-lucide="${photo.isFavorite ? 'heart' : 'heart'}" 
                           style="${photo.isFavorite ? 'fill: #ff3b2f; color: #ff3b2f;' : ''}"></i>
                    </button>
                    <button class="photo-action-btn" onclick="event.stopPropagation(); downloadSinglePhoto(${index})">
                        <i data-lucide="download"></i>
                    </button>
                </div>
            </div>
        `).join('');
        
        // Reinitialize icons in new content
        lucide.createIcons();
    }
    
    // Filter photos by type
    function filterPhotosByType(photos, filterType) {
        switch(filterType) {
            case 'favorites':
                return photos.filter(p => p.isFavorite);
            case 'recent':
                return photos.slice(0, 20); // Last 20 photos
            case 'byDate':
                // Group by date and return one from each day
                const dates = {};
                return photos.filter(p => {
                    const date = p.date.split('T')[0];
                    if (!dates[date]) {
                        dates[date] = true;
                        return true;
                    }
                    return false;
                });
            default:
                return photos;
        }
    }
    
    // Update statistics
    function updateStats() {
        const totalPhotos = allPhotos.length;
        const favorites = allPhotos.filter(p => p.isFavorite).length;
        
        // Calculate unique days
        const uniqueDays = new Set(allPhotos.map(p => p.date.split('T')[0])).size;
        
        // Calculate storage (mock calculation)
        const storageUsed = Math.round(totalPhotos * 2.5); // 2.5MB average per photo
        
        document.getElementById('totalPhotos').textContent = totalPhotos;
        document.getElementById('daysCovered').textContent = uniqueDays;
        document.getElementById('totalLikes').textContent = favorites;
        document.getElementById('storageUsed').textContent = `${storageUsed}MB`;
        document.getElementById('photoCount').textContent = `${totalPhotos} photos`;
    }
    
    // Filter button handler
    function filterPhotos(filterType) {
        currentFilter = filterType;
        
        // Update active button
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');
        
        updateGallery();
    }
    
    // Lightbox functions
    function openLightbox(index) {
        currentLightboxIndex = index;
        const photo = filteredPhotos[index];
        
        document.getElementById('lightboxImage').src = photo.url;
        document.getElementById('lightboxTitle').textContent = photo.caption || 'Untitled Photo';
        document.getElementById('lightboxDate').textContent = `Date: ${formatDate(photo.date)}`;
        document.getElementById('lightboxDescription').textContent = `Location: ${photo.location || 'Unknown'}`;
        
        document.getElementById('lightbox').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }
    
    function closeLightbox() {
        document.getElementById('lightbox').style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    function prevPhoto() {
        currentLightboxIndex = (currentLightboxIndex - 1 + filteredPhotos.length) % filteredPhotos.length;
        openLightbox(currentLightboxIndex);
    }
    
    function nextPhoto() {
        currentLightboxIndex = (currentLightboxIndex + 1) % filteredPhotos.length;
        openLightbox(currentLightboxIndex);
    }
    
    // Photo actions
    function toggleFavorite(index) {
        const photo = filteredPhotos[index];
        const originalIndex = allPhotos.findIndex(p => p.id === photo.id);
        
        if (originalIndex !== -1) {
            allPhotos[originalIndex].isFavorite = !allPhotos[originalIndex].isFavorite;
            savePhotos();
            updateGallery();
            updateStats();
        }
    }
    
    function downloadSinglePhoto(index) {
        const photo = filteredPhotos[index];
        const link = document.createElement('a');
        link.href = photo.url;
        link.download = `travel_photo_${photo.date}.jpg`;
        link.click();
        alert('Download started!');
    }
    
    function downloadPhoto() {
        downloadSinglePhoto(currentLightboxIndex);
    }
    
    function sharePhoto() {
        const photo = filteredPhotos[currentLightboxIndex];
        if (navigator.share) {
            navigator.share({
                title: 'My Travel Photo',
                text: `From my trip: ${photo.caption || 'Travel memory'}`,
                url: photo.url,
            })
            .catch(error => console.log('Error sharing:', error));
        } else {
            alert('Share link copied to clipboard!');
            // Fallback: Copy URL to clipboard
            navigator.clipboard.writeText(photo.url);
        }
    }
    
    function deleteCurrentPhoto() {
        if (confirm('Delete this photo? This cannot be undone.')) {
            const photo = filteredPhotos[currentLightboxIndex];
            allPhotos = allPhotos.filter(p => p.id !== photo.id);
            
            savePhotos();
            closeLightbox();
            updateGallery();
            updateStats();
            alert('Photo deleted!');
        }
    }
    
    // Upload functions
    function setupUpload() {
        const uploadInput = document.getElementById('fileUpload');
        
        uploadInput.addEventListener('change', function(e) {
            handleFileUpload(e.target.files);
            uploadInput.value = ''; // Reset input
        });
        
        // Drag and drop
        const uploadArea = document.getElementById('uploadArea');
        
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            uploadArea.style.background = '#ffd1c1';
            uploadArea.style.transform = 'translateY(-2px)';
        });
        
        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            uploadArea.style.background = 'var(--light-orange)';
            uploadArea.style.transform = 'translateY(0)';
        });
        
        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            uploadArea.style.background = 'var(--light-orange)';
            uploadArea.style.transform = 'translateY(0)';
            
            if (e.dataTransfer.files.length) {
                handleFileUpload(e.dataTransfer.files);
            }
        });
    }
    
    function uploadPhotos() {
        document.getElementById('fileUpload').click();
    }
    
    function handleFileUpload(files) {
        if (files.length > 20) {
            alert('Maximum 20 photos at once. Please select fewer photos.');
            return;
        }
        
        let uploadedCount = 0;
        
        Array.from(files).slice(0, 20).forEach(file => {
            if (!file.type.startsWith('image/')) {
                alert(`${file.name} is not an image. Skipped.`);
                return;
            }
            
            if (file.size > 10 * 1024 * 1024) {
                alert(`${file.name} is too large (max 10MB). Skipped.`);
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const newPhoto = {
                    id: Date.now() + Math.random(),
                    url: e.target.result,
                    date: new Date().toISOString(),
                    caption: file.name.split('.')[0],
                    location: 'Uploaded',
                    isFavorite: false,
                    fileSize: Math.round(file.size / 1024) + 'KB'
                };
                
                allPhotos.unshift(newPhoto); // Add to beginning
                uploadedCount++;
                
                // If this is the last file, save and update
                if (uploadedCount === Math.min(files.length, 20)) {
                    savePhotos();
                    updateGallery();
                    updateStats();
                    alert(`âœ… ${uploadedCount} photo(s) uploaded successfully!`);
                }
            };
            reader.readAsDataURL(file);
        });
    }
    
    // Save photos to localStorage
    function savePhotos() {
        const tripPhotos = JSON.parse(localStorage.getItem('tripPhotos') || '{}');
        const tripKey = `trip_${currentTripId}`;
        
        tripPhotos[tripKey] = allPhotos;
        localStorage.setItem('tripPhotos', JSON.stringify(tripPhotos));
        
        // Update trip's photo count
        const trips = JSON.parse(localStorage.getItem('travelTrips') || '[]');
        const tripIndex = trips.findIndex(t => t.id == currentTripId);
        
        if (tripIndex !== -1) {
            trips[tripIndex].photosCount = allPhotos.length;
            localStorage.setItem('travelTrips', JSON.stringify(trips));
        }
    }
    
    // Helper functions
    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', { 
            month: 'short', 
            day: 'numeric',
            year: 'numeric'
        });
    }
    
    function goBack() {
        // window.location.href = `TRIP-DETAILS.html?id=${currentTripId}`;
        alert(`Would go back to trip details ${currentTripId}`);
    }
    
    // Sample data
    function getSampleTrip() {
        return {
            id: 1,
            name: "Vacation in Boracay",
            photosCount: 8
        };
    }
    
    function getSamplePhotos() {
        const samplePhotos = [];
        const locations = ['White Beach, Boracay', 'Puka Beach', 'Diniwid Beach', 'Mount Luho', 'Boracay Night Market'];
        const dates = ['2024-03-15', '2024-03-16', '2024-03-17', '2024-03-18', '2024-03-19'];
        
        for (let i = 1; i <= 8; i++) {
            samplePhotos.push({
                id: `sample_${i}`,
                url: `https://picsum.photos/300/300?random=${i}&grayscale`,
                date: dates[i % dates.length] + 'T10:00:00Z',
                caption: `Boracay Day ${i}`,
                location: locations[i % locations.length],
                isFavorite: i % 3 === 0,
                fileSize: '2.4MB'
            });
        }
        
        return samplePhotos;
    }
    
    // Keyboard navigation for lightbox
    document.addEventListener('keydown', function(e) {
        if (document.getElementById('lightbox').style.display === 'flex') {
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowLeft') prevPhoto();
            if (e.key === 'ArrowRight') nextPhoto();
        }
    });
</script>
</body>
</html>